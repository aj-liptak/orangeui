<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
<title>Views Test</title>

<link type="text/html" href="templates/home.html"/>
<script src="lib/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="lib/json-template.js" type="text/javascript"></script>
<script src="src/oop.js" type="text/javascript"></script>
<script src="src/commons.js" type="text/javascript"></script>
<script src="src/ui.js" type="text/javascript"></script>

<script type="text/javascript">

Orange.add('test', function(O) {

	O.namespace('Test');
	
		
	O.Test.TestViewController = O.View.define({
		
		type: 'ui-test-view',
		
		onLoad: function() {
									
			this.on('updated', $.proxy(this.onChange, this));
			
			// load childen
			this.super.onLoad.call(this);
			
		},
		
		onChange: function(e) {
			this.getView('home').getView('info').target.css('background-color', e.data);			
		},
		
		onUnload: function() {
					
		
		}
		
	});
	
	O.Test.FormViewController = O.View.define({
		
		type: 'ui-form-view',
		
		onLoad: function() {
			
			var that = this;
			
			this.getForm('testForm').get('first_name').val('Kevin');
			this.getForm('testForm').get('last_name').val('Kinnebrew');
			
			this.target.css('background-color', '#F00');
						
			this.on('updated', function(e) {
				console.log("updated");
			});
			
			// load childen
			this.super.onLoad.call(this);
								
		},
		
		onUnload: function() {
					
			//console.log("home view unloaded");
		
		}
		
	});
	
	O.Test.InfoViewController = O.View.define({
		
		type: 'test-info-view',
		
		onLoad: function() {
						
			var that = this;
			
			// bind events
			
			
			// load childen
			this.super.onLoad.call(this);
			
			// fire events
				that.fire('updated', '#F0F');
												
		},
		
		onUnload: function() {
					
		}
		
	});
	
		
}, ['ui'], '0.1');

$(document).ready(function() {

//	Orange.app('test', {
//		location: true,
//		poll: false,
//		required: ['test'],
//		baseUrl: '/orangeui',
//		namespace: 'Test',
//		rootView: 'ui-test-view'
//	});
//	
//	Orange.init('test');

	var test = {
		link: $("#hello")
	}
	
	console.log(test);

	var el = test.link.remove();
	console.log(el);
	
	console.log(test);

});

</script>

</head>

<body>

<!--<div data-view="ui-test-view" data-name="test" data-root="true">

	<div data-view="ui-form-view" data-name="home" data-template="home.html"></div>

</div>-->

<div id="hello">Hello</div>

</body>
</html>
