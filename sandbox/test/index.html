<script src="src/orangeui-1.0.2.js" type="text/javascript"></script>
<script src="modules/rest.js" type="text/javascript"></script>
<script src="modules/cakephp.js" type="text/javascript"></script>
<script src="inflection.js" type="text/javascript"></script>
<script type="text/javascript">

Orange.use(function(O) {
		
	var Test = new O.Application('test', {
		required: ['rest', 'cakephp'],
		location: true,
		poll: true
	});
	
	Log.on('info', function(e) {
		console.log('[INFO] ' + e.data);
	});
	
	Test.launch();

});

//Orange.use('rest', 'cakephp', function(O) {
//	
//	var CakeSource 	= __import('CakeSource'),
//			Model 			= __import('Model')
//			Cache				= __import('Cache'),
//			Storage			= __import('Storage'),
//			Location		= __import('Location'),
//			Application	= __import('Application');
//	
//	window.onload = function() {
//	
//		Cache.on('statusChange', function(e) {
//			if (e.data == 1) console.log('Application online');
//			else console.log('Application offline');
//		});
//		
//		Cache.init(false);
//		Storage.init();
//		Location.fetch();
//		
//		Cache.updateNetworkStatus();
//		
//		var contactsSource = new CakeSource({
//			name: 'contacts-api',
//			path: '/contacts'
//		});
//		
//		var Contacts = new Model({
//			name: 'contacts',
//			id: 'id',
//			fields: {
//				contactId: { name: 'id', type: 'text', nullable: false },
//				firstName: { name: 'first_name', type: 'text', nullable: false },
//				lastName: { name: 'last_name', type: 'text', nullable: false },
//				phone: { name: 'phone', type: 'text', nullable: true },
//				birthday: { name: 'birthday', type: 'date', nullable: true },
//				website: { name: 'website', type: 'url', nullable: true }
//			},
//			source: contactsSource
//		});
//		
//		var success = function(data) {
//			console.log(data.toArray());
//			data.filter(function(data) {
//				return data.firstName == 'Kevin';
//			});
//			console.log(data.toArray());
//		};
//		
//		var successItem = function(data) {
//			console.log(data.toObject());
//		};
//		
//		var error = function(e) {
//			console.error(e);
//		};
//		
//		Contacts.getAll({}, success, error);
		//Contacts.get(1, successItem, error);
		//Contacts.set({ firstName: '123', lastName: '456' }, successItem, error);
		//Contacts.remove(16, successItem, error);
//	
//		var test = new Application('test', {
//			required: ['rest', 'cakephp']
//		});
//		
//		test.launch();
//	
//	};
//
//});

</script>